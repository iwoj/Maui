// =============================================================================// com.bitmovers.maui.LogPrintStream// // Created: 1999.06.30// =============================================================================package com.bitmovers.utilities;import java.io.*;import java.util.*;// =============================================================================// CLASS: LogPrintStream// =============================================================================/** LogPrintStream is a simple extension to the PrintStream class which pre-  * pends the current date to the string being printed.  *  * @author Patrick Gibson <patrick@bitmovers.com>  * @version 1999.11.26  */public class LogPrintStream extends PrintStream implements Runnable{	// ---------------------------------------------------------------------------			private Vector logVector = new Vector();	// ---------------------------------------------------------------------------	// CONSTRUCTOR: LogPrintStream	// ---------------------------------------------------------------------------	public LogPrintStream(PrintStream printStream)	{		super(printStream);				Thread logger = new Thread(this, "LogPrintStream");		logger.setPriority(Thread.MIN_PRIORITY);		logger.start();	}	// ---------------------------------------------------------------------------	// METHOD: print	// ---------------------------------------------------------------------------	/** Overrides java.io.PrintStream.print() and prepends the current date to	  * the String.	  *	  */	public void print(String string)	{		try		{			this.logVector.addElement("[" + new Date() + "] " + string);		}		catch (Exception e)		{			this.logVector.addElement("[" + new Date() + "] LogPrintStream: " + e.getClass().getName() + " (" + e.getMessage() + ")");		}	}	// ---------------------------------------------------------------------------	// METHOD: println	// ---------------------------------------------------------------------------	/** Overrides java.io.PrintStream.println(), adds a newline character, and	  * calls this.print.	  *	  */		public void println(String string)	{		this.print(string + "\n");	}	// ---------------------------------------------------------------------------	// METHOD: run	// ---------------------------------------------------------------------------	/** The run method for the "MauiLogger" thread. It looks into the log stack	  * for messages to print, prints them, and sleeps for 500 millis.	  *	  */	public void run()	{		while (true)		{			try			{				// Check to see of the log vector has anything to print. If it does,				// print it.				if (!this.logVector.isEmpty())				{					int initialSize = this.logVector.size();										for (int i = 0; i < initialSize; i++)					{						super.print(this.logVector.elementAt(0));						this.logVector.removeElementAt(0);					}				}				Thread.sleep(500);			}			catch (InterruptedException e)			{				this.print("Warning: LogPrintStream thread was interrupted.");			}		}	}	// ---------------------------------------------------------------------------}